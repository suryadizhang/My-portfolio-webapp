#!/usr/bin/env sh
echo "🚀 Running pre-push validation..."

# Run type checking, linting, and tests
echo "📋 Step 1/3: Type checking and tests (skipping lint for deployment)..."
npm run typecheck && npm run test || exit 1

# Run module sanity check
echo "📦 Step 2/3: Module sanity check..."
node -e "require.resolve('@portfolio/ui'); require.resolve('@portfolio/utils')" || exit 1

# Optional: Docker smoke test (comment out if Docker Desktop not always running)
echo "🐳 Step 3/3: Docker smoke test (skipped - Docker Desktop not running)..."
# npm run docker:smoke || exit 1

echo "✅ All pre-push checks passed! Pushing to remote..."